<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nyx Guard Settings</title>
    <link rel="stylesheet" href="./options.css" />
  </head>
  <body>
    <div class="page">
      <header>
        <div class="title">Nyx Guard</div>
        <div class="subtitle">Risk Engine Options</div>
      </header>

      <section class="card">
        <h2>Detection Toggles</h2>
        <label class="toggle">
          <input type="checkbox" id="enableMaliciousChecks" />
          <span>Malicious checks</span>
        </label>
        <label class="toggle">
          <input type="checkbox" id="enableAdsChecks" />
          <span>Ads & trackers checks</span>
        </label>
        <label class="toggle">
          <input type="checkbox" id="enableContentChecks" />
          <span>Content checks</span>
        </label>
        <label class="toggle">
          <input type="checkbox" id="enableTextSample" />
          <span>Allow text sampling (privacy)</span>
        </label>
        <label class="toggle">
          <input type="checkbox" id="enableVirusTotal" />
          <span>Use VirusTotal reputation (optional)</span>
        </label>
        <label class="toggle">
          <input type="checkbox" id="enableDangerAlerts" />
          <span>Show danger alert near high risk</span>
        </label>
      </section>

      <section class="card">
        <h2>Sensitivity</h2>
        <div class="slider-row">
          <input
            type="range"
            id="sensitivity"
            min="0.5"
            max="1.5"
            step="0.1"
          />
          <span id="sensitivityValue">1.0x</span>
        </div>
        <p class="hint">Multiplier applied to weights (except allow/deny lists).</p>
      </section>

      <section class="card">
        <h2>Risk Ranges</h2>
        <div class="field-row">
          <label for="lowMax">Low max</label>
          <input type="number" id="lowMax" min="0" max="98" />
        </div>
        <div class="field-row">
          <label for="mediumMax">Medium max</label>
          <input type="number" id="mediumMax" min="1" max="99" />
        </div>
        <p class="hint">High starts at medium max + 1.</p>
        <div class="hint" id="thresholdsHint"></div>
      </section>

      <section class="card">
        <h2>VirusTotal</h2>
        <input
          id="virusTotalApiKey"
          type="password"
          autocomplete="off"
          placeholder="Paste your VirusTotal API key"
        />
        <p class="hint">
          Free API has low rate limits. Nyx Guard caches lookups and only checks domain reputation.
        </p>
      </section>

      <section class="card">
        <h2>Allowlist</h2>
        <textarea id="allowlist" rows="6" placeholder="example.com"></textarea>
        <div class="hint" id="allowlistHint">One domain per line.</div>
      </section>

      <section class="card">
        <h2>Denylist</h2>
        <textarea id="denylist" rows="6" placeholder="malicious.com"></textarea>
        <div class="hint" id="denylistHint">One domain per line.</div>
      </section>

      <section class="actions">
        <button id="saveBtn" class="btn">Save</button>
        <button id="resetBtn" class="btn btn-secondary">Reset defaults</button>
      </section>

      <div class="status" id="status"></div>
    </div>

    <script type="module" src="./options.ts"></script>
  </body>
</html>
